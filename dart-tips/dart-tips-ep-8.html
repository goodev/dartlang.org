<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/Product" xmlns:wb="http://open.weibo.com/wb">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  
  <title>控制流语句 - Dart 技巧， 第八集 | Dart: 用于创建结构化的web应用</title>
  <meta property="wb:webmaster" content="a984f6440858ee44" />
  <meta property="twitter:account_id" content="376585411" />
  <meta itemprop="name" content="控制流语句 - Dart 技巧， 第八集 | Dart: 用于创建结构化的web应用">
  
  <meta itemprop="image" content="//dartpic.goodev.org/dartlang/vi/XdqZdsdzD2A/0.jpg">
  
  <meta itemprop="description" content="学习 Dart 的控制流语句。关于 if、 while、 for、 和 switch。另外视频中还介绍了一种在 Web 开发中非常有用的技巧。 ">

  <!-- Bootstrap core CSS -->
  <link href="/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="/css/dart-style.css" rel="stylesheet">
  <link href="/css/prettify.css" type="text/css" rel="stylesheet" />
  <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
  <link href="//fonts.googleapis.com/css?family=Roboto:300,400" rel="stylesheet">
	
	<link rel="author" href="/authors/seth-ladd.html">
	
	<link rel="alternate" type="application/atom+xml" href="http://dartnews.sinaapp.com/?feed=atom" title="Atom feed">
  <!-- 
  <link href="https://plus.google.com/109866369054280216564" rel="publisher">
  -->
  <link href="http://weibo.com/cndart" rel="publisher">

  <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
  <![endif]-->

  <!-- 
<script type="text/javascript">

  //var _gaq = _gaq || [];
 // _gaq.push(['_setAccount', 'UA-26406144-4']);
  //_gaq.push(['_setDomainName', 'dartlang.org']);
  //_gaq.push(['_setSiteSpeedSampleRate', 50]);
  //_gaq.push(['_trackPageview']);

 // (function() {
   // var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
   // ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
   // var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
 // })();

</script>
-->


  <script type="text/javascript" src="https://www.google.com/jsapi"></script>
  <script>
  

<!-- 
	window.___gcfg = {lang: 'en'};
	(function()
	{var po = document.createElement("script");
	po.type = "text/javascript"; po.async = true;po.src = "https://apis.google.com/js/plusone.js";
	var s = document.getElementsByTagName("script")[0];
	s.parentNode.insertBefore(po, s);
	})();
-->
  </script>
<!-- 
  <script>
    window.twttr = (function (d,s,id) {
      var t, js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
      js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
      return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
    }(document, "script", "twitter-wjs"));
  </script>
-->
  <script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script>
</head>
<body onload="prettyPrint()">
    <div class="navbar navbar-fixed-top navbar-inverse" role="navigation">
      <div class="container">
        
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/"><i class="sprite-icon-dart-logo"></i></a>
        </div>

        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
           <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                                       入门
              </a>
              <ul class="dropdown-menu">
                <i class="sprite-icon-dd-tip"></i>
                <li><a href="/codelabs/darrrt/">试试 Dart</a></li>
                <li><a href="/docs/tutorials/">Dart 教程</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                                文档
              </a>
              <ul class="dropdown-menu">
                <i class="sprite-icon-dd-tip"></i>
                <li><a href="/docs/">开发者指南</a></li>
                <li><a href="http://api.dartlang.org">API 参考</a></li>
                <li><a href="/docs/spec/">语言规范</a></li>

                <li class="divider"></li>
                <li><a href="/docs/dart-up-and-running/">Dart: Up and Running</a></li>
                <li><a href="/books/">更多图书</a></li>

                <li class="divider"></li>
                <li><a href="/articles/">文章</a></li>
                <li><a href="/support/faq.html">FAQ</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                       工具
              </a>
              <ul class="dropdown-menu">
                <i class="sprite-icon-dd-tip"></i>
                <li><a href="/docs/dart-up-and-running/contents/ch04-tools-dart2js.html">dart2js</a>
                </li><li><a href="/tools/editor/">Dart Editor</a></li>
                <li><a href="http://pub.dartlang.org/">Pub Package Manager</a></li>
                <li><a href="/tools/">更多工具</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                                     资源
              </a>
              <ul class="dropdown-menu">
                <i class="sprite-icon-dd-tip"></i>
                <li><a href="/samples/">示例代码</a></li>
                <li><a href="http://synonym.dartlang.org/">Translations from Dart</a></li>
                <li><a href="http://try.dartlang.org/">Try Dart!</a></li>

                <li class="divider"></li>
                <li><a href="/slides/">演示文稿</a></li>
                <li><a href="/dart-tips/">Dart 短视频</a></li>

                <li class="divider"></li>
                <li><a href="http://code.google.com/p/dart/issues/list">Bugs and Feature Requests</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                              社区
              </a>
              <ul class="dropdown-menu">
                <i class="sprite-icon-dd-tip"></i>
                <li><a href="/support/">支持和社区资源</a></li>
                <li><a href="http://code.google.com/p/dart/wiki/Contributing">Contributor's Guide</a></li>
              </ul>
            </li>
          </ul>

          <ul class="nav navbar-nav navbar-right">
            <li>
              <form class="navbar-search" action="/search.html" id="cse-search-box">
                <input type="hidden" name="cx" value="011220921317074318178:i4mscbaxtru">
                <input type="hidden" name="ie" value="UTF-8">
                <input type="hidden" name="hl" value="en">
                <input type="search" name="q" class="search-query placeholder-position-fix form-control" id="q" autocomplete="off" placeholder="Search">
              </form>
            </li>
            <li><a target="_blank" href="https://twitter.com/dart_lang" class="btn"><i class="sprite-icon-social-twitter"></i></a></li>
            <li><a target="_blank" href="https://plus.google.com/+dartlang/posts" class="btn"><i class="sprite-icon-social-gplus"></i></a></li>
            <li><a target="_blank" href="http://weibo.com/cndart" class="btn"><i class="sprite-icon-social-weibo"><img src="/imgs/weibo.png"></i></a></li>
          </ul>
        </div><!-- /.nav-collapse -->

      </div><!-- /.container -->
    </div><!-- /.navbar -->

  


<div class="container-page">
  <div class="container">
  	<div class="container sub-page">
    <article>
    <h1 id="dart--">控制流语句 - Dart 技巧， 第八集</h1>

<!-- 
<iframe class="dart-tips-video" src="//www.youtube.com/embed/XdqZdsdzD2A" 
frameborder="0" allowfullscreen></iframe>
-->
<embed class="dart-tips-video" src="http://player.youku.com/player.php/sid/XNjQwODE0NTI4/v.swf" allowfullscreen="true" quality="high" width="480" height="400" align="middle" allowscriptaccess="always" type="application/x-shockwave-flash" />

<p><a href="/dart-tips/">返回 Dart 短视频技巧首页</a>.</p>

<hr />

<h3 id="section">文字稿</h3>

<p>Hi, my name is Seth Ladd, and welcome to this episode of Dart Tips. Today, we take back control and look at Dart’s control flow statements. All the greatest hits are here: if, while, for, and switch. Plus, I’ll show you a helpful tweak that should make web developers quite happy. Join us right now, on Dart Tips.</p>

<p>First up, if and else. No big surprises here. The conditional if statement can be followed by zero or more else-if statements, and can end with an <em>else</em> statement. Here is an example:</p>

<pre class="prettyprint lang-dart">if (isRaining()) {
  you.bringRainCoat();
} else if (isSnowing()) {
  you.wearJacket();
} else {
  car.putTopDown();
}</pre>

<p>However, I do want to point out that the condition must resolve to a boolean. In Dart, only the boolean value <em>true</em> is true; all other values are treated as false. Consider this example:</p>

<pre class="prettyprint lang-dart">String name = '';

if (name) {
  // will never be reached
} else {
  // a string is not a bool, so it is false
}</pre>

<p>Here, the variable <em>name</em> is a string. Of course, a string is not a bool, and therefore the <em>else</em> block is run.</p>

<p>Here is the correct way to write this code. You must be more explicit, but the advantage is that the rules for truthy and falsely values are very simple to remember.</p>

<pre class="prettyprint lang-dart">// instead
if (name != null &amp;&amp; !name.isEmpty) {
  congrats(name);
} else {
  tryAgain();
}</pre>

<p>For very simple conditions, you can write an if statement on one line of code. Here is an example:</p>

<pre class="prettyprint lang-dart">recurse(List items) {
  if (items == null || items.isEmpty) return;
  // …
}</pre>

<p>You might use this pattern at the beginning of a function, when you need to check a simple condition and bail out early. Most of the time, Dart style prefers multi-line if statements with explicit curly braces.</p>

<p>For looping, pun definitely intended, Dart has for-loops. Like if statements, for loops look quite familiar. Here is an example:</p>

<pre class="prettyprint lang-dart">var message = new StringBuffer(&quot;Dart is fun&quot;);
for (var i = 0; i &lt; 5; i++) {
  message.add('!');
}</pre>

<p>Let’s consider a more complex example. Here, callbacks are created inside of a for-loop, each closing around the loop variable i. After the loop, each callback is run, printing out its number.</p>

<pre class="prettyprint lang-dart">var callbacks = [];
for (var i = 0; i &lt; 2; i++) {
  callbacks.add(() =&gt; print(i));
}
callbacks.forEach((c) =&gt; c());</pre>

<p>The question is, what will print out? Or, a better question is, what would you expect to print out? Unlike traditional web programming languages, Dart will print 0 and then 1. Why is this?</p>

<pre class="prettyprint lang-dart">callbacks.forEach((c) =&gt; c());
  // 0, 1</pre>

<p>Inside a for-loop, each iteration gets its own variable. This prevents common errors when using closures inside of loops.</p>

<p>If you want to iterate over a collection, or any iterable, and you don’t care about the loop variable, you can use the for-in style loop.</p>

<p>Here is an example of a for-in loop.</p>

<pre class="prettyprint lang-dart">var fruits = ['apples', 'pears', 'oranges'];
for (var fruit in fruits) {
  print(fruit);
}</pre>

<p>The for-in loop is just syntactic sugar for the longer iterator form:</p>

<pre class="prettyprint lang-dart">var fruits = ['apples', 'pears', 'oranges'];

var iterator = fruits.iterator;
while (iterator.moveNext()) {
  var fruit = iterator.current;
  print(fruit);
}</pre>

<p>Either form works, but I’m partial to for-in as it’s shorter. And shorter means less code. And less code means less chance for me to get it wrong.</p>

<p>When you want to loop while a condition is true, you can use the while and do-while loops. Unlike the for-loop, which counts up or down or moves through a collection, the while and do-while lists more simply run a block of code until a condition is false. Here is an example:</p>

<p>The while loop evaluates the condition before the loop, and repeats the loop as long as the condition is true.</p>

<pre class="prettyprint lang-dart">while(peopleAreClapping()) {
  playSongs();
}</pre>

<p>The while loop is a good choice if you want to check a condition before entering the loop for the first time.</p>

<p>The do-while loop, however, evaluates the condition <em>after</em> the loop. This means the loop block is run at least one time.</p>

<pre class="prettyprint lang-dart">do {
  processRequest();
} while(stillRunning());</pre>

<p>You can control a loop’s execution with break and continue. Use <em>break</em> to stop looping. Here is an example:</p>

<pre class="prettyprint lang-dart">while (true) {
  if (shutDownRequested()) break;
  processIncomingRequests();
}</pre>

<p>If shutDownRequested returns true, the program breaks out of the loop.</p>

<p>You can use <em>continue</em> to skip to the next loop iteration. Here is an example:</p>

<pre class="prettyprint lang-dart">for (var i = 0; i &lt; bigNumber; i++) {
  if (i.isEven)
    continue;
  
  reticulateSplines(i);
  oddIsTheNewBlack(i);
  cleanUp(i);
}</pre>

<p>You can usually use if and else statements instead of continue, but sometimes it’s a bit easier on the eyes to use continue. This example wants to work with only odd numbers, so the even numbers are skipped. I’d consider continue a “sometimes” statement, used sparingly.</p>

<p>Finally, in order to help with efforts to port old code over to Dart, there is the switch statement. While the syntax looks familiar, there are numerous caveats.</p>

<pre class="prettyprint lang-dart">var command = 'OPEN';

switch (command) {
  case 'CLOSED':
    executeClosed();
    break;
  case 'OPEN':
    executeOpen();
    break;
  case 'APPROVED':
    executeApproved();
    break;
  default:
    executeUnknown();
}</pre>

<p>You can only compare integer, string, or compile-time constants. The compared objects must be instances of the same class (and not of any of its subtypes), and the class must not override ==.</p>

<p>One surprising aspect of switch in Dart is that non-empty case clauses must end with break, or less commonly, continue, throw, or return. That is, non-empty case clauses cannot fall through. You must explicitly end a non-empty case clause, usually with a break. You will get a static warning if you omit break, continue, throw, or return, and the code will error at that location at runtime.</p>

<pre class="prettyprint lang-dart">var command = 'OPEN';
switch (command) {
  case 'OPEN':
    executeOpen();
    // ERROR: Missing break causes an exception to be thrown!!

  case 'CLOSED':
    executeClosed();
    break;
}</pre>

<p>I keep saying “non-empty” case clauses, why is that? It turns out that Dart supports empty case clauses, which do fall through. Here is an example:</p>

<pre class="prettyprint lang-dart">var command = 'CLOSED';
switch (command) {
  case 'CLOSED':     // Empty case falls through.
  case 'LOCKED':
    // Runs for both CLOSED and LOCKED.
    denyEntry();
    break;
}</pre>

<p>The denyEntry() method runs for both CLOSED and LOCKED. The CLOSED case clause is empty, and thus does not require a break.</p>

<p>As with many other switch statements, you can end a switch statement with a <em>default</em> clause. Here is an example:</p>

<pre class="prettyprint lang-dart">var command = 'OPEN';
switch (command) {
  case 'CLOSED':
    executeClosed();
    break;
  case 'PENDING':
    executePending();
    break;
  default:
    executeUnknown();
}</pre>

<p>If no case clause matches, the default clause will run.</p>

<p>I hope you enjoyed this tour of Dart’s control flow statements. Thanks for watching. I’m Seth Ladd, and as we say here on Dart Tips, stay sharp.</p>

<hr />

<p><img src="imgs/marakana-logo.png" alt="Marakana Logo" /></p>

<p>非常感谢 <a href="http://www.marakana.com">Marakana</a> 制作该系列短视频。</p>

<p><a href="/dart-tips/">返回 Dart 短视频技巧首页</a>.</p>

    </article>
    
	
    </div>
  </div>
</div>

  <footer class="footer container-full">
    <div class="container">
      <div class="row">
        <div class="col-md-5">
          <h3>一种用于创建可扩展 web 应用程序的语言、工具和代码库</h3>
          <p>Dart 是一个 <a href="https://code.google.com/p/dart/">开源项目</a>，由  Google 和其他人员参与。</p>
          <p class="sm">除非注明，该页面内容使用 the Creative Commons Attribution 3.0 License 发布，示例代码使用  BSD License 发布。</p>
          <!-- 
          <p><a class="saelogo" href="http://sae.sina.com.cn/activity/invite/15649/weibo" target="_blank"><img src="http://static.sae.sina.com.cn/image/poweredby/poweredby.png" title="Powered by Sina App Engine"></a></p>     	
          -->
        </div>
        <div class="col-md-2 col-md-offset-1">
          <h4>受欢迎的文章</h4>
          <ul>
            <li><a href="/polymer-dart/?utm_source=site&amp;utm_medium=footer&amp;utm_campaign=homepage">Polymer.dart</a></li>
            <li><a href="/performance/">性能</a></li>
            <li><a href="/docs/dart-up-and-running/contents/ch02.html?utm_source=site&amp;utm_medium=footer&amp;utm_campaign=homepage">语言概览</a> &amp;
            <a href="/docs/dart-up-and-running/contents/ch03.html?utm_source=site&amp;utm_medium=footer&amp;utm_campaign=homepage">代码库概览</a></li>
            <li><a href="/samples/?utm_source=site&amp;utm_medium=footer&amp;utm_campaign=homepage">示例代码</a></li>
            <li><a href="/docs/tutorials/?utm_source=site&amp;utm_medium=footer&amp;utm_campaign=homepage">教程</a> &amp;
                <a href="/codelabs/darrrt/?utm_source=site&amp;utm_medium=footer&amp;utm_campaign=homepage">代码实验室</a></li>
          </ul>
        </div>
        <div class="col-md-2">
          <h4>资源</h4>
          <ul>
            <li><a href="http://pub.dartlang.org/">Pub packages</a></li>
            <li><a href="http://synonym.dartlang.org/">Translations from Dart</a></li>
            <li><a href="http://code.google.com/p/dart/issues/list">Dart bugs and feature requests</a></li>
          </ul>
        </div>
        <div class="col-md-2">
          <h4>社区</h4>
          <ul>
            <li><a href="/support/">邮件列表</a></li>
            <li><a href="http://bbs.dartlang.cc">中文社区</a></li>
            <li><a href="https://plus.google.com/communities/114566943291919232850">G+ 社区</a></li>
            <li><a href="https://plus.google.com/+dartlang/posts">G+ 新闻发布频道</a></li>
            <li><a href="http://stackoverflow.com/questions/tagged/dart">Stack Overflow</a></li>
          </ul>
        </div>
      </div>
    </div>
  </footer> <!-- End footer -->

<script type='text/javascript' src='/js/jquery.js'></script>
<script type='text/javascript' src='/js/bootstrap.min.js'></script>
<script type='text/javascript' src='/js/social-event-analytics.js'></script>
<script type='text/javascript' src='/js/prettify.js'></script>
<script type='text/javascript' src='/js/lang-dart.js'></script>
<script type='text/javascript' src='/js/lang-yaml.js'></script>
<script type='text/javascript' src='/js/scripts.js'></script>




<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F76b2695e71e6cec6e6af036d76afa367' type='text/javascript'%3E%3C/script%3E"));
</script>

<!-- Baidu Button BEGIN -->
<script type="text/javascript" id="bdshare_js" data="type=slide&amp;img=1&amp;pos=left&amp;uid=590574" ></script>
<script type="text/javascript" id="bdshell_js"></script>
<script type="text/javascript">
var bds_config={"bdTop":367};
document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + Math.ceil(new Date()/3600000);
</script>
<!-- Baidu Button END -->
</body>
</html>

