<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/Product" xmlns:wb="http://open.weibo.com/wb">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  
  <title>有趣的函数 第一部分- Dart 技巧， 第六集 | Dart: 用于创建结构化的web应用</title>
  <meta property="wb:webmaster" content="a984f6440858ee44" />
  <meta property="twitter:account_id" content="376585411" />
  <meta itemprop="name" content="有趣的函数 第一部分- Dart 技巧， 第六集 | Dart: 用于创建结构化的web应用">
  
  <meta itemprop="image" content="//dartpic.goodev.org/dartlang/vi/DWtvhdJkiRE/0.jpg">
  
  <meta itemprop="description" content="每个应用中 函数都是基础组成部分。Dart 支持顶级函数、可选参数、默认参数值 等等。 这集介绍 Dart 函数的基本内容。 ">


  <link rel='stylesheet' type='text/css' href='/css/bootstrap.min.css'>
<link rel='stylesheet' type='text/css' href='/css/dart-style.css'>
<link rel='stylesheet' type='text/css' href='/css/prettify.css'>
<link rel='stylesheet' type='text/css' href='/css/font-awesome.min.css'>

  
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700|Roboto:300,400" rel="stylesheet">

	
	<link rel="author" href="/authors/seth-ladd.html">
	
	<link rel="alternate" type="application/atom+xml" href="http://dartnews.sinaapp.com/?feed=atom" title="Atom feed">
  <!-- 
  <link href="https://plus.google.com/109866369054280216564" rel="publisher">
  -->
  <link href="http://weibo.com/cndart" rel="publisher">

  <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
  <![endif]-->

  <!-- 
<script type="text/javascript">

  //var _gaq = _gaq || [];
 // _gaq.push(['_setAccount', 'UA-26406144-4']);
  //_gaq.push(['_setDomainName', 'dartlang.org']);
  //_gaq.push(['_setSiteSpeedSampleRate', 50]);
  //_gaq.push(['_trackPageview']);

 // (function() {
   // var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
   // ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
   // var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
 // })();

</script>
-->


  <script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script>
</head>
<body onload="prettyPrint()">
    <div class="navbar navbar-fixed-top navbar-inverse" role="navigation">
      <div class="container">
        
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/"><i class="sprite-icon-dart-logo"></i></a>
        </div>

        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
           <li class="dropdown">
              <a href="/codelabs/darrrt/" title="Learn Dart in this short code lab.">
                                                       入门
              </a>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                                文档
              </a>
              <ul class="dropdown-menu">
                <i class="sprite-icon-dd-tip"></i>
                <li><a href="/docs/tutorials/">教程</a></li>
                <li class="divider"></li>
                 
                <li><a href="/docs/">开发者指南</a></li>
                <li><a href="http://api.dartlang.org">API 参考</a></li>
                <li><a href="/docs/spec/">语言规范</a></li>

                <li class="divider"></li>
                <li><a href="/docs/dart-up-and-running/">Dart: Up and Running</a></li>
                <li><a href="/books/">更多图书</a></li>

                <li class="divider"></li>
                <li><a href="/articles/">文章</a></li>
                <li><a href="/support/faq.html">FAQ</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                       工具
              </a>
              <ul class="dropdown-menu">
                <i class="sprite-icon-dd-tip"></i>
                <li><a href="/docs/dart-up-and-running/contents/ch04-tools-dart2js.html">dart2js</a>
                </li><li><a href="/tools/editor/">Dart Editor</a></li>
                <li><a href="http://pub.dartlang.org/">Pub Package Manager</a></li>
                <li><a href="/tools/">更多工具</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                                     资源
              </a>
              <ul class="dropdown-menu">
                <i class="sprite-icon-dd-tip"></i>
                <li><a href="/samples/">示例代码</a></li>
                <li><a href="/docs/synonyms/">和其他语言的相同点</a></li>

                <li class="divider"></li>
                <li><a href="/slides/">演示文稿</a></li>
                <li><a href="/dart-tips/">Dart 短视频</a></li>

                <li class="divider"></li>
                <li><a href="/performance/">性能</a></li>
                <li class="divider"></li>
                <li><a href="http://code.google.com/p/dart/issues/list">Bugs and Feature Requests</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="/support/" title="Community and Support">
                                              支持
              </a>
            </li>
          </ul>

          <ul class="nav navbar-nav navbar-right">
            <li>
              <form class="navbar-search" action="/search.html" id="cse-search-box">
                <input type="hidden" name="cx" value="011220921317074318178:i4mscbaxtru">
                <input type="hidden" name="ie" value="UTF-8">
                <input type="hidden" name="hl" value="en">
                <input type="search" name="q" class="search-query placeholder-position-fix form-control" id="q" autocomplete="off" placeholder="Search">
              </form>
            </li>
            <li><a target="_blank" href="https://twitter.com/dart_lang" class="btn"><i class="sprite-icon-social-twitter"></i></a></li>
            <li><a target="_blank" href="https://plus.google.com/+dartlang/posts" class="btn"><i class="sprite-icon-social-gplus"></i></a></li>
            <li><a target="_blank" href="http://weibo.com/cndart" class="btn"><i class="sprite-icon-social-weibo"><img src="/imgs/weibo.png"></i></a></li>
          </ul>
        </div><!-- /.nav-collapse -->

      </div><!-- /.container -->
    </div><!-- /.navbar -->

  


<div class="container-page">
  <div class="container">
  	<div class="container sub-page">
       <div>
         <h1 id="dart--">有趣的函数 第一部分- Dart 技巧， 第六集</h1>

<!-- 
<iframe class="dart-tips-video" src="//www.youtube.com/embed/DWtvhdJkiRE" 
frameborder="0" allowfullscreen></iframe>
-->
<embed class="dart-tips-video" src="http://player.youku.com/player.php/sid/XNjQwODE0MTUy/v.swf" allowfullscreen="true" quality="high" width="480" height="400" align="middle" allowscriptaccess="always" type="application/x-shockwave-flash" />

<p><a href="/dart-tips/">返回 Dart 短视频技巧首页</a>.</p>

<hr />

<h3 id="section">文字稿</h3>

<p>Hi my name is Seth Ladd and welcome to this episode of Dart Tips. This is part
one in a series about Functions, the stalwart and trusty building blocks of any
app. Dart supports top-level functions, optional parameters, nested functions,
passing functions as arguments to other functions, and more. It’s not uncommon
to build an entire app using only functions. If you think Dart is only classes
and libraries, you’re in for a treat. This episode will focus on
defining and calling functions. Let’s get started.</p>

<p>Functions are reusable bundles of logic. They can take zero or more
arguments, perform some work, and optionally return a value.</p>

<p>Here is a very simple function named meaningOfLife.</p>

<pre class="prettyprint lang-dart">meaningOfLife() {
  return 42;
}</pre>

<p>The empty parentheses means this
function does not take any parameters. Use the return statement to return
a value, in this case 42. If no return statement is specified, the function
returns null.</p>

<p>Here is how you call this function:</p>

<pre class="prettyprint lang-dart">var answer = meaningOfLife();</pre>

<p>So far, so good. But Dart likes to be a terse language, so we can simplify
the definition of the function into a single line.</p>

<pre class="prettyprint lang-dart">meaningOfLife() =&gt; 42;</pre>

<p>This “fat arrow” syntax is “syntactic sugar” for a more terse way to return the
resulting value of the expression on right-hand side of the fat arrow.</p>

<p>Functions can of course accept parameters. Here is an example:</p>

<pre class="prettyprint lang-dart">shout(msg) {
  return msg.toUpperCase();
}</pre>

<p>This code works just fine, but this is Dart! We have optional type annotations,
so we can annotate this method’s parameters and return type.</p>

<pre class="prettyprint lang-dart">String shout(String msg) {
  return msg.toUpperCase();
}</pre>

<p>We strongly recommend using type annotations on the “surface area” of your
code. Any code that another user will interact with, functions being a
perfect example, should annotate what types it expects and what type it
returns. Your fellow developers will thank you, and your tools will give you
even better feedback.</p>

<p>Functions can take multiple parameters. Here is an example:</p>

<pre class="prettyprint lang-dart">String shout(String msg, int exclamations) {
  var louder = new StringBuilder(msg.toUpperCase());
  for (var i = 0; i &lt; exclamations; i++) {
    louder.add(&quot;!&quot;);
  }
  return louder.toString();
}</pre>

<p>This function has two required parameters: a string for the message and an
integer for the number of exclamation points to add at the end.</p>

<p>Exclamation points are loud, no doubt about it, but sometimes you may not want
to shout so loud. Of course, one option is to pass zero as the second parameter
value, like this code shows.</p>

<pre class="prettyprint lang-dart">var message = shout(&quot;Dart puts the FUN into functions&quot;, 0);</pre>

<p>This, however, is a hard to read line of code. A casual observer may not know
what that magic zero is. Also, wouldn’t it be better to simply leave off the
second parameter if you don’t want to use it? Luckily, Dart has a way to make
this better.</p>

<p>Wrap one or more parameters with square brackets to make them optional.</p>

<p>Here is an example:</p>

<pre class="prettyprint lang-dart">String shout(String msg, [int exclamations]) {
  var louder = new StringBuilder(msg.toUpperCase());
  if (exclamations != null) {
    for (var i = 0; i &lt; exclamations; i++) {
      louder.add(&quot;!&quot;);
    }
  }
  return louder.toString();
}</pre>

<p>Notice how the function now checks if exclamations is null, which is the value
of the parameter if it was not provided by the caller.</p>

<p>Now that the second parameter is optional, you can optionally omit it when you
call the function. Here is an example:</p>

<pre class="prettyprint lang-dart">var message = shout(&quot;Functions are fun&quot;);

// or, to really make a point

var message = shout(&quot;Functions are fun&quot;, 5);</pre>

<p>We made this function more flexible and easier to use. However, there is still
another problem here. The second parameter, if it is provided, still looks
a bit like a magic number. That is, the casual observer would not know what
the number five means.</p>

<p>Luckily, Dart has a solution for this, too. You can make methods even
easier to read by using optional named parameters.</p>

<p>Here is an example. I think adding a simple name to the parameter makes it
obvious what is going on.</p>

<pre class="prettyprint lang-dart">var message = shout(&quot;Functions are fun&quot;, exclamations: 5);</pre>

<p>To define optional named parameters, wrap the parameters in curly braces , like
this:</p>

<pre class="prettyprint lang-dart">String shout(String msg, {int exclamations}) {
  // same contents
}</pre>

<p>To briefly recap, there are two ways to define optional parameters.</p>

<ul>
  <li>[ ] for optional positional parameters</li>
  <li>{ } for optional named parameters</li>
</ul>

<p>There’s yet another benefit from the use of optional parameters. But first, the
setup: Sometimes, there’s an obvious or default value for a parameter. Only on
occasion does it make sense to pass in something more unique.</p>

<p>For example, here is a function that opens an HTTP connection.</p>

<p>The first parameter, ipAddress, could be anything, so it’s required. However,
almost all HTTP connections use port 80, so the second parameter can be optional.</p>

<pre class="prettyprint lang-dart">openHttpConnection(String ipAddr, {int port}) {
  if (port == null) {
    port = 80;
  }
  // ...
}</pre>

<p>The function is easier to use now, because the user doesn’t have to specify
the obvious. However, the code inside the function is a bit verbose. Plus,
there’s no way to express to the user what the port’s value will be if
it is not provided.</p>

<p>Luckily, Dart lets us specify a default value for a parameter if that parameter is
optional.</p>

<p>Here is an example:</p>

<pre class="prettyprint lang-dart">openHttpConnection(String ipAddr, {int port: 80}) {
  // ...
}</pre>

<p>This code is simpler, the semantics are more clear, and it is self documenting.
You can use any compile-time constant, such as integer literals as shown here,
for default values.</p>

<p>Here are some examples of using this function:</p>

<pre class="prettyprint lang-dart">openHttpConnection(&quot;127.0.0.1&quot;);       // port is 80
openHttpConnection(&quot;127.0.0.1&quot;, port: 3000); // port is 3000</pre>

<p>However, here is an example that might not be totally clear. Notice
how I am passing null as the second parameter.</p>

<pre class="prettyprint lang-dart">openHttpConnection(&quot;127.0.0.1&quot;, port: null);</pre>

<p>null is a perfectly valid value, so in this case port will be set to null,
even though it has a default value. The lesson here is that default values
are only applied if the caller does not supply any value for the parameter.
This means, to really cover your bases, you should check for null even
when you use default values.</p>

<p>This brings up a good question. In the case of an optional parameter
without a default value, can you tell
the difference between a user passing in null, and not passing in anything
at all? The parameter will be null either way.</p>

<p>It turns out that Dart does indeed have a way to ask if an optional parameter
was provided when the method was called. Just use the question mark parameter
syntax.</p>

<p>Here is an example:</p>

<pre class="prettyprint lang-dart">void alignDingleArm(num axis, [num rotations]) {
  if (?rotations) {
    // the parameter was really used
  }
}</pre>

<p>Like the optional named parameters, you can use default values
with optional positional parameters. There is a syntax difference, though.
You must use <em>equals</em> with positional params, instead of <em>colon</em>.</p>

<p>Here is an example of defining an optional positional parameter with a default
value.</p>

<pre class="prettyprint lang-dart">int indexOf(E element, [int startAt = 0]) {
  // ...
}</pre>

<p>Moving on, you can define functions simply at the top level of your code.
Here is an example:</p>

<pre class="prettyprint lang-dart">String shout(String msg) {
  return msg.toUpperCase();
}

main() {
  print(shout(&quot;Functions are FUNdamental&quot;));
}</pre>

<p>I love this, because it means I don’t need to wrap functions inside
classes. Writing a simple script with Dart is easy, because of top-level
functions.</p>

<p>Now you know that functions can capitalize on type annotations, have both
optional positional and optional named parameters, have default values for their
optional parameters, and more. There’s a lot more to functions in Dart, and
we’ll cover nested functions, functions as objects, and more in a future
episode.</p>

<p>Thanks for watching, my name is Seth Ladd, and as we say here on Dart Tips, stay sharp!</p>

<hr />

<p><img src="imgs/marakana-logo.png" alt="Marakana Logo" /></p>

<p>非常感谢 <a href="http://www.marakana.com">Marakana</a> 制作该系列短视频。</p>

<p><a href="/dart-tips/">返回 Dart 短视频技巧首页</a>.</p>

       </div>
    </div>
  </div>
</div>

  <footer class="footer container-full">
    <div class="container">
      <div class="row">
        <div class="col-md-5">
          <h3>一种用于创建可扩展 web 应用程序的语言、工具和代码库</h3>
          <p>Dart 是一个 <a href="https://code.google.com/p/dart/">开源项目</a>，由  Google 和其他人员参与。</p>
          <p class="sm">除非注明，该页面内容使用 the Creative Commons Attribution 3.0 License 发布，示例代码使用  BSD License 发布。</p>
          <!-- 
          <p><a class="saelogo" href="http://sae.sina.com.cn/activity/invite/15649/weibo" target="_blank"><img src="http://static.sae.sina.com.cn/image/poweredby/poweredby.png" title="Powered by Sina App Engine"></a></p>     	
          -->
        </div>
        <div class="col-md-2 col-md-offset-1">
          <h4>受欢迎的文章</h4>
          <ul>
            <li><a href="/polymer-dart/?utm_source=site&amp;utm_medium=footer&amp;utm_campaign=homepage">Polymer.dart</a></li>
            <li><a href="/performance/">性能</a></li>
            <li><a href="/docs/dart-up-and-running/contents/ch02.html?utm_source=site&amp;utm_medium=footer&amp;utm_campaign=homepage">语言概览</a> &amp;
            <a href="/docs/dart-up-and-running/contents/ch03.html?utm_source=site&amp;utm_medium=footer&amp;utm_campaign=homepage">代码库概览</a></li>
            <li><a href="/samples/?utm_source=site&amp;utm_medium=footer&amp;utm_campaign=homepage">示例代码</a></li>
            <li><a href="/docs/tutorials/?utm_source=site&amp;utm_medium=footer&amp;utm_campaign=homepage">教程</a> &amp;
                <a href="/codelabs/darrrt/?utm_source=site&amp;utm_medium=footer&amp;utm_campaign=homepage">代码实验室</a></li>
          </ul>
        </div>
        <div class="col-md-2">
          <h4>资源</h4>
          <ul>
            <li><a href="http://pub.dartlang.org/">Pub packages</a></li>
            <li><a href="/docs/synonyms/">和其他语言的相同点</a></li>
            <li><a href="http://code.google.com/p/dart/issues/list">Dart bugs and feature requests</a></li>
          </ul>
        </div>
        <div class="col-md-2">
          <h4>社区</h4>
          <ul>
            <li><a href="/support/">邮件列表</a></li>
            <li><a href="http://forum.dartlang.cc">中文社区</a></li>
            <li><a href="http://weibo.com/cndart">中文微博</a></li>
            <li><a href="https://plus.google.com/communities/114566943291919232850">G+ 社区</a></li>
            <li><a href="https://plus.google.com/+dartlang/posts">G+ 新闻发布频道</a></li>
            <li><a href="http://stackoverflow.com/questions/tagged/dart">Stack Overflow</a></li>
          </ul>
        </div>
      </div>
    </div>
  </footer> <!-- End footer -->

<script type='text/javascript' src='/js/jquery.js'></script>
<script type='text/javascript' src='/js/bootstrap.min.js'></script>
<script type='text/javascript' src='/js/prettify.js'></script>
<script type='text/javascript' src='/js/lang-dart.js'></script>
<script type='text/javascript' src='/js/lang-yaml.js'></script>
<script type='text/javascript' src='/js/scripts.js'></script>




<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F76b2695e71e6cec6e6af036d76afa367' type='text/javascript'%3E%3C/script%3E"));
</script>

<!-- Baidu Button BEGIN -->
<script type="text/javascript" id="bdshare_js" data="type=slide&amp;img=1&amp;pos=left&amp;uid=590574" ></script>
<script type="text/javascript" id="bdshell_js"></script>
<script type="text/javascript">
var bds_config={"bdTop":367};
document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + Math.ceil(new Date()/3600000);
</script>
<!-- Baidu Button END -->
</body>
</html>

