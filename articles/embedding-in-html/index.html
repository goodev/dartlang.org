<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/Product" xmlns:wb="http://open.weibo.com/wb">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  
  <title>Embedding Dart in HTML | Dart: 用于创建结构化的web应用</title>
  <meta property="wb:webmaster" content="a984f6440858ee44" />
  <meta property="twitter:account_id" content="376585411" />
  <meta itemprop="name" content="Embedding Dart in HTML | Dart: 用于创建结构化的web应用">
  
  <meta itemprop="image" content="https://www.dartlang.org/imgs/dart-logo-wordmark-1200w.png">
  
  <meta itemprop="description" content="Find out how you can embed Dart into HTML pages.">


  <link rel='stylesheet' type='text/css' href='/css/bootstrap.min.css'>
<link rel='stylesheet' type='text/css' href='/css/dart-style.css'>
<link rel='stylesheet' type='text/css' href='/css/prettify.css'>
<link rel='stylesheet' type='text/css' href='/css/font-awesome.min.css'>

  
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700|Roboto:300,400" rel="stylesheet">

	
	<link rel="author" href="/authors/sigmund-cherem.html"><link rel="author" href="/authors/vijay-menon.html"><link rel="author" href="/authors/seth-ladd.html">
	
	<link rel="alternate" type="application/atom+xml" href="http://dartnews.sinaapp.com/?feed=atom" title="Atom feed">
  <!-- 
  <link href="https://plus.google.com/109866369054280216564" rel="publisher">
  -->
  <link href="http://weibo.com/cndart" rel="publisher">

  <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
  <![endif]-->

  <!-- 
<script type="text/javascript">

  //var _gaq = _gaq || [];
 // _gaq.push(['_setAccount', 'UA-26406144-4']);
  //_gaq.push(['_setDomainName', 'dartlang.org']);
  //_gaq.push(['_setSiteSpeedSampleRate', 50]);
  //_gaq.push(['_trackPageview']);

 // (function() {
   // var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
   // ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
   // var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
 // })();

</script>
-->


  <script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script>
</head>
<body onload="prettyPrint()">
    <div class="navbar navbar-fixed-top navbar-inverse" role="navigation">
      <div class="container">
        
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/"><i class="sprite-icon-dart-logo"></i></a>
        </div>

        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
           <li class="dropdown">
              <a href="/codelabs/darrrt/" title="Learn Dart in this short code lab.">
                                                       入门
              </a>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                                文档 <span class="caret"></span>
              </a>
              <ul class="dropdown-menu">
                <i class="sprite-icon-dd-tip"></i>
                <li><a href="/docs/tutorials/">教程</a></li>
                
                <i class="sprite-icon-dd-tip"></i>
                <li><a href="/dart-by-example/">Dart 示例</a></li>
                
                <li class="divider"></li>
                <li><a href="/docs/">开发者指南</a></li>
                <li><a href="http://api.dartlang.org">API 参考</a></li>
                <li><a href="/docs/spec/">语言规范</a></li>

                <li class="divider"></li>
                <li><a href="/docs/dart-up-and-running/">Dart: Up and Running</a></li>
                <li><a href="/books/">更多图书</a></li>

                <li class="divider"></li>
                <li><a href="/articles/">文章</a></li>
                <li><a href="/support/faq.html">FAQ</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                       工具  <span class="caret"></span>
              </a>
              <ul class="dropdown-menu">
                <i class="sprite-icon-dd-tip"></i>
                <li><a href="/tools/download.html">下载 Dart</a></li>
                <li class="divider"></li>
                </li><li><a href="/tools/editor/">Dart Editor</a></li>
                <li><a href="http://pub.dartlang.cc/">Pub 包管理器</a></li>
                <li><a href="/docs/dart-up-and-running/contents/ch04-tools-dart2js.html">dart2js</a>
                <li><a href="/tools/faq.html">工具 FAQ</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                                     资源  <span class="caret"></span>
              </a>
              <ul class="dropdown-menu">
                <i class="sprite-icon-dd-tip"></i>
                <li><a href="/samples/">示例代码</a></li>
                <li><a href="/docs/synonyms/">和其他语言的相同点</a></li>
                <li><a href="/performance/">性能</a></li>

                <li class="divider"></li>
                <li><a href="/slides/">演示文稿</a></li>
                <li><a href="/dart-tips/">Dart 短视频</a></li>

                <li class="divider"></li>
                <li><a href="/community/who-uses-dart.html">谁在使用 Dart</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="/support/" title="Community and Support">
                                              支持
              </a>
            </li>
          </ul>

          <ul class="nav navbar-nav navbar-right">
            <li>
              <form class="navbar-search" action="/search.html" id="cse-search-box">
                <input type="hidden" name="cx" value="011220921317074318178:i4mscbaxtru">
                <input type="hidden" name="ie" value="UTF-8">
                <input type="hidden" name="hl" value="en">
                <input type="search" name="q" class="search-query placeholder-position-fix form-control" id="q" autocomplete="off" placeholder="Search">
              </form>
            </li>
            <li><a target="_blank" href="https://twitter.com/dart_lang" class="btn"><i class="sprite-icon-social-twitter"></i></a></li>
            <li><a target="_blank" href="https://plus.google.com/+dartlang/posts" class="btn"><i class="sprite-icon-social-gplus"></i></a></li>
            <li><a target="_blank" href="http://weibo.com/cndart" class="btn"><i class="sprite-icon-social-weibo"><img src="/imgs/weibo.png"></i></a></li>
          </ul>
        </div><!-- /.nav-collapse -->

      </div><!-- /.container -->
    </div><!-- /.navbar -->

  


<div class="container-page">
  <div class="container">
  	<div class="container sub-page">
      <div class="row">
        <article class="has-permalinks"><div class="col-md-3">
  <div class="bs-sidebar hidden-print affix-top" role="complementary">

<ol class="toc nav bs-sidenav" id="markdown-toc">
  <li><a href="#quick-start">Quick start</a></li>
  <li><a href="#dart-mime-type">Dart MIME type and the &lt;script&gt; tag</a></li>
  <li><a href="#dart-html-semantics">Dart semantics in HTML</a></li>
  <li><a href="#dartjs-script">The dart.js script</a></li>
  <li><a href="#fundamental-differences-from-javascript">Fundamental differences from JavaScript</a>    <ol>
      <li><a href="#a-single-script-tag">A single script tag</a></li>
      <li><a href="#execution-timing">Execution timing</a></li>
      <li><a href="#no-inline-event-listeners">No inline event listeners</a></li>
      <li><a href="#no-script-injection-of-dart-code">No script injection of Dart code</a></li>
    </ol>
  </li>
</ol>

  </div>
</div>
<div class="col-md-7">
  <p><!-- Start of content -->
	</p>

  <h1 id="embedding-dart-in-html">Embedding Dart in HTML</h1>

  <p><em>Written by Sigmund Cherem, Vijay Menon, and Seth Ladd <br />
October 2011
(updated November 2013)</em></p>

  <p>Dart apps compile to JavaScript to run across modern desktop and mobile
browsers. Dart apps can also run inside a Dart virtual machine (VM), which can be
embedded into web browsers.</p>

  <p>This article covers how to integrate Dart apps into web pages, when first
compiled to JavaScript or when run in the Dart VM.</p>

  <h2 id="quick-start">Quick start</h2>

  <ol>
    <li>Compile your Dart app to JavaScript with
<a href="/docs/dart-up-and-running/contents/ch04-tools-dart2js.html">dart2js</a>.
If your Dart file is <code>app.dart</code> then name your JavaScript version <code>app.dart.js</code>.</li>
    <li>Load your Dart app with a <code>&lt;script type="application/dart"&gt;</code> tag (only one per HTML page).</li>
    <li>Follow that tag with a &lt;script&gt; tag for the <code>dart.js</code> file.</li>
  </ol>

  <p>Here is a minimal example, which works in all browsers (even if they don’t
  support the Dart VM):</p>

  <pre class="prettyprint lang-dart">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Simple Dart App&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;Hello, Dart!&lt;/h1&gt;
    &lt;script type=&quot;application/dart&quot; src=&quot;app.dart&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;packages/browser/dart.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre>

  <h2 id="dart-mime-type">Dart MIME type and the &lt;script&gt; tag</h2>

  <p>HTML <code>script</code> tags provide a
<code>type</code> attribute to define the language of the script.
For Dart, this attribute has the value <code>application/dart</code>.</p>

  <p>Here is an example:</p>

  <pre class="prettyprint lang-html">&lt;script type=&quot;application/dart&quot; src=&quot;app.dart&quot;&gt;&lt;/script&gt;</pre>

  <p>Dart doesn’t support inline scripts (scripts defined inside the HTML page).
While an inline script technically works in Dartium (a build of Chromium
with the Dart VM), the Dart-to-JavaScript compiler (dart2js) doesn’t work with inline
scripts.</p>

  <p>The Dart app must have a visible top-level function called <code>main()</code>.
The browser invokes <code>main()</code> when the DOM content is loaded (but see
caveat in the <a href="#dart-html-semantics">next section</a>).</p>

  <p>You should use only one <code>&lt;script type="application/dart"&gt;</code> inside the HTML
page. The dart2js compiler produces JavaScript that assumes it is
the only Dart app on the page.</p>

  <h2 id="dart-html-semantics">Dart semantics in HTML</h2>

  <p>The precise semantics of Dart execution on an HTML page are evolving
and likely to change by the time Dart is natively supported in a
production browser.</p>

  <p>Currently, your Dart app’s <code>main()</code> function is run after DOM content
is loaded, but the exact timing is undefined (e.g., with respect to
the load event or deferred JavaScript).  In the future, we may invoke
<code>main()</code> synchronously during HTML parsing instead of waiting for DOM
content to load.</p>

  <p>As such, we recommend the following:</p>

  <ol>
    <li>Restrict your application to a single Dart script per document.</li>
    <li>Place your Dart script at the end of your document’s body (followed
only by the dart.js script if you choose to use that).</li>
    <li>Do not use async or defer attributes on your Dart script tag at this point.</li>
    <li>Do not rely upon ordering between your Dart script and any
JavaScript scripts that may execute after it (e.g., that appear
after it or are marked async or defer).</li>
    <li>Do not rely upon script injection of Dart code.</li>
  </ol>

  <h2 id="dartjs-script">The dart.js script</h2>

  <p>Use the dart.js script to run your app in browsers that don’t have a
Dart VM. The dart.js script allows you to use the same HTML page for
both Dartium and other browsers.</p>

  <p>If no Dart VM is detected in the browser, the dart.js script swaps out the
<code>application/dart</code> script for a
<code>text/javascript</code> script that points to the JavaScript version of the
Dart app.</p>

  <p>The dart.js script tag must come after the Dart script tag.</p>

  <p>For example:</p>

  <pre class="prettyprint lang-html">&lt;script type=&quot;application/dart&quot; src=&quot;awesome_app.dart&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;packages/browser/dart.js&quot;&gt;&lt;/script&gt;</pre>

  <p>To get a copy of the dart.js file,
you can use the <a href="http://pub.dartlang.org">pub package manager</a>.
Here’s how:</p>

  <ol>
    <li>
      <p>Add the following to your application’s pubspec.yaml:</p>

      <pre><code>dependencies:
  browser: any
</code></pre>
    </li>
    <li>
      <p>Run <code>pub get</code>.</p>
    </li>
    <li>
      <p>Use a relative script tag to point to the installed version:</p>

      <pre><code>&lt;script src="packages/browser/dart.js"&gt;&lt;/script&gt;
</code></pre>
    </li>
  </ol>

  <p>If you don’t want to use pub,
you can instead download a copy of
<a href="https://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js">dart.js from the Dart project</a>.
Note that the location of the file might change.</p>

  <h2 id="fundamental-differences-from-javascript">Fundamental differences from JavaScript</h2>

  <p>Embedding Dart code is different from embedding JavaScript
in a few ways.</p>

  <h3 id="a-single-script-tag">A single script tag</h3>

  <p>Each HTML document can have at most one Dart script tag, or only one
script tag that references a Dart app that is compiled to JavaScript.
This fundamentally differs from the way
that JavaScript is embedded in HTML—in
JavaScript, you can have multiple script tags per document.</p>

  <p>In JavaScript, additional script tags are used to import third party libraries
(e.g., jQuery).  In Dart, this is not necessary: import is part of the language.</p>

  <p>Web components and HTML imports are an important caveat to the one
script per document rule.  For example, the <a href="/polymer-dart">Polymer.dart</a>
framework uses HTML imports to allow developers to include HTML components into a
Dart application.  Dart scripts in imported HTML documents are
injected into the main application.  See the Polymer.dart
<a href="/polymer-dart">documentation</a> for more details.</p>

  <h3 id="execution-timing">Execution timing</h3>

  <p>Unlike in JavaScript,
top-level Dart constructs (such as interfaces, classes, and functions)
are declarative.
Each Dart application (defined via a script tag)
provides an explicit <code>main()</code> entry point
that is invoked by the browser when it is ready to run.</p>

  <p>Currently, the Dart app’s <code>main()</code> function
is invoked after the page’s DOM is loaded.</p>

  <h3 id="no-inline-event-listeners">No inline event listeners</h3>

  <p>We disallow inline event listeners of the form:</p>

  <pre class="prettyprint lang-html">&lt;div onclick=&quot;foo()&quot;&gt;Click this text.&lt;/div&gt;</pre>

  <p>With JavaScript, programmers can embed inline event listener code
directly onto HTML nodes.
However, this is typically discouraged in modern JavaScript applications.
HTML pages generally render more quickly
if listeners are added programmatically afterwards.
Modern security guidelines also discourage inline code.
As such, we propose to not allow inline Dart listeners.</p>

  <h3 id="no-script-injection-of-dart-code">No script injection of Dart code</h3>

  <p>We do not currently support or recommend dynamically injecting a
<code>&lt;script&gt;</code> tag that loads Dart code. Recent browser security trends,
like Content Security Policy, actively prevent this practice.</p>
</div>

    	  </div> <!-- End of content from toc.html -->
        </article>
	  </div>

	
	<ul class="pager">
	  <li><a href="/articles/">关于 Dart 的更多文章 <i class="glyphicon glyphicon-chevron-up"></i></a></li>
	 </ul>
	 

	</div>
  </div>
</div>

  <footer class="footer container-full">
    <div class="container">
      <div class="row">
        <div class="col-md-5">
          <h3>一种用于创建可扩展 web 应用程序的语言、工具和代码库</h3>
          <p>Dart 是一个 <a href="https://code.google.com/p/dart/">开源项目</a>，由  Google 和其他人员参与。</p>
          <p class="sm">除非注明，该页面内容使用 the Creative Commons Attribution 3.0 License 发布，示例代码使用  BSD License 发布。</p>
          <!-- 
          <p><a class="saelogo" href="http://sae.sina.com.cn/activity/invite/15649/weibo" target="_blank"><img src="http://static.sae.sina.com.cn/image/poweredby/poweredby.png" title="Powered by Sina App Engine"></a></p>     	
          -->
        </div>
        <div class="col-md-2 col-md-offset-1">
          <h4>受欢迎的文章</h4>
          <ul>
            <li><a href="/polymer-dart/?utm_source=site&amp;utm_medium=footer&amp;utm_campaign=homepage">Polymer.dart</a></li>
            <li><a href="/performance/">性能</a></li>
            <li><a href="/docs/dart-up-and-running/contents/ch02.html?utm_source=site&amp;utm_medium=footer&amp;utm_campaign=homepage">语言概览</a> &amp;
            <a href="/docs/dart-up-and-running/contents/ch03.html?utm_source=site&amp;utm_medium=footer&amp;utm_campaign=homepage">代码库概览</a></li>
            <li><a href="/samples/?utm_source=site&amp;utm_medium=footer&amp;utm_campaign=homepage">示例代码</a></li>
            <li><a href="/docs/tutorials/?utm_source=site&amp;utm_medium=footer&amp;utm_campaign=homepage">教程</a> &amp;
                <a href="/codelabs/darrrt/?utm_source=site&amp;utm_medium=footer&amp;utm_campaign=homepage">代码实验室</a></li>
          </ul>
        </div>
        <div class="col-md-2">
          <h4>资源</h4>
          <ul>
            <li><a href="http://pub.dartlang.org/">Pub packages</a></li>
            <li><a href="/docs/synonyms/">和其他语言的相同点</a></li>
            <li><a href="http://code.google.com/p/dart/issues/list">Dart bugs and feature requests</a></li>
          </ul>
        </div>
        <div class="col-md-2">
          <h4>社区</h4>
          <ul>
            <li><a href="/support/">邮件列表</a></li>
            <li><a href="http://forum.dartlang.cc">中文社区</a></li>
            <li><a href="http://weibo.com/cndart">中文微博</a></li>
            <li><a href="https://plus.google.com/communities/114566943291919232850">G+ 社区</a></li>
            <li><a href="https://plus.google.com/+dartlang/posts">G+ 新闻发布频道</a></li>
            <li><a href="http://stackoverflow.com/questions/tagged/dart">Stack Overflow</a></li>
          </ul>
        </div>
      </div>
    </div>
  </footer> <!-- End footer -->

<script type='text/javascript' src='/js/jquery.js'></script>
<script type='text/javascript' src='/js/bootstrap.min.js'></script>
<script type='text/javascript' src='/js/prettify.js'></script>
<script type='text/javascript' src='/js/lang-dart.js'></script>
<script type='text/javascript' src='/js/lang-yaml.js'></script>
<script type='text/javascript' src='/js/scripts.js'></script>




<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F76b2695e71e6cec6e6af036d76afa367' type='text/javascript'%3E%3C/script%3E"));
</script>

<!-- Baidu Button BEGIN -->
<script type="text/javascript" id="bdshare_js" data="type=slide&amp;img=1&amp;pos=left&amp;uid=590574" ></script>
<script type="text/javascript" id="bdshell_js"></script>
<script type="text/javascript">
var bds_config={"bdTop":367};
document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + Math.ceil(new Date()/3600000);
</script>
<!-- Baidu Button END -->
</body>
</html>

